<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class HttpError401Handler | Kampute.HttpClient .NET Library </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class HttpError401Handler | Kampute.HttpClient .NET Library ">
      
      <meta name="description" content="Handles &#39;401 Unauthorized&#39; HTTP responses by attempting to re-authenticate and retry the request.">
      <link rel="icon" href="../ICON.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      <meta name="docfx:disablenewtab" content="true">
      
      <meta name="docfx:docurl" content="https://github.com/kampute/http-client/new/master/apiSpec/new?filename=Kampute_HttpClient_ErrorHandlers_HttpError401Handler.md&amp;value=---%0Auid%3A%20Kampute.HttpClient.ErrorHandlers.HttpError401Handler%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../ICON.png" alt="Kampute.HttpClient .NET Library">
            Kampute.HttpClient .NET Library
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler">



  <h1 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler" class="text-break">
Class HttpError401Handler  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L46"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Kampute.html">Kampute</a>.<a class="xref" href="Kampute.HttpClient.html">HttpClient</a>.<a class="xref" href="Kampute.HttpClient.ErrorHandlers.html">ErrorHandlers</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Kampute.HttpClient.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Handles '401 Unauthorized' HTTP responses by attempting to re-authenticate and retry the request.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class HttpError401Handler : IHttpErrorHandler, IDisposable</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">HttpError401Handler</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="Kampute.HttpClient.Interfaces.IHttpErrorHandler.html">IHttpErrorHandler</a></div>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.idisposable">IDisposable</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
The <a class="xref" href="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.html">HttpError401Handler</a> class is specifically designed to enhance instances of <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a> by providing a mechanism
to handle HTTP '401 Unauthorized' responses. When a request made by a <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a> instance receives a '401 Unauthorized' status code,
this indicates that the request was rejected due to insufficient or missing authentication credentials. The <a class="xref" href="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.html">HttpError401Handler</a> responds 
to such scenarios by initiating a re-authentication process using a delegate provided at instantiation, to obtain new authentication credentials.
</p>
<p>
The delegate provided to the constructor is tasked with obtaining new authentication credentials, which might involve interacting with an authentication 
server or prompting the user for credentials. Successful acquisition of new credentials leads to their application to the <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a>
instance, allowing the previously failed request to be retried with the updated authentication details.
</p>
<p>
When an authentication process is underway for a client, subsequent authentication requests from the client will not initiate new processes. Instead, they 
will await and utilize the outcome of the ongoing authentication. This approach guarantees that the authentication delegate is executed a single time for 
concurrent requests, ensuring both efficiency and thread safety.
</p>
<p>
This error handler can be integrated with multiple <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a> instances, enabling centralized management of authentication challenges 
across various client instances that interact with different endpoints. It is crucial, therefore, that the delegate provided for authentication is designed 
to be thread-safe, ensuring consistent and safe operation across concurrent authentication processes.
</p>
</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler__ctor_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.#ctor*"></a>

  <h3 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler__ctor_System_Func_Kampute_HttpClient_HttpRestClient_System_Collections_Generic_IEnumerable_System_Net_Http_Headers_AuthenticationHeaderValue__System_Threading_CancellationToken_System_Threading_Tasks_Task_System_Net_Http_Headers_AuthenticationHeaderValue___" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.#ctor(System.Func{Kampute.HttpClient.HttpRestClient,System.Collections.Generic.IEnumerable{System.Net.Http.Headers.AuthenticationHeaderValue},System.Threading.CancellationToken,System.Threading.Tasks.Task{System.Net.Http.Headers.AuthenticationHeaderValue}})">
  HttpError401Handler(Func&lt;HttpRestClient, IEnumerable&lt;AuthenticationHeaderValue&gt;, CancellationToken, Task&lt;AuthenticationHeaderValue?&gt;&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L93"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.html">HttpError401Handler</a> class.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public HttpError401Handler(Func&lt;HttpRestClient, IEnumerable&lt;AuthenticationHeaderValue&gt;, CancellationToken, Task&lt;AuthenticationHeaderValue?&gt;&gt; asyncAuthenticator)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>asyncAuthenticator</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-4">Func</a>&lt;<a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.net.http.headers.authenticationheadervalue">AuthenticationHeaderValue</a>&gt;, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.net.http.headers.authenticationheadervalue">AuthenticationHeaderValue</a>&gt;&gt;</dt>
    <dd><p>The asynchronous delegate to be invoked to acquire new authorization details.</p>
</dd>
  </dl>








  <h4 class="section" id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler__ctor_System_Func_Kampute_HttpClient_HttpRestClient_System_Collections_Generic_IEnumerable_System_Net_Http_Headers_AuthenticationHeaderValue__System_Threading_CancellationToken_System_Threading_Tasks_Task_System_Net_Http_Headers_AuthenticationHeaderValue____remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
The <code class="paramref">asyncAuthenticator</code> delegate is responsible for obtaining new authentication credentials, typically in response to an 
authentication challenge indicated by an HTTP '401 Unauthorized' status code.
</p>
<p>
The delegate should evaluate the provided challenges and return an instance of <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.net.http.headers.authenticationheadervalue">AuthenticationHeaderValue</a> containing the 
authorization details necessary for subsequent requests if authentication can be successfully completed. If the authentication process 
fails, or if no suitable challenge can be met, the delegate should return <code>null</code>.
</p>
<p>
The delegate receives the following parameters:
<ul><li><span class="term">client</span>The instance of <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a> making the request that was challenged with a '401 Unauthorized' response. 
This client can be used to perform further requests, such as retrieving a new token from an authentication server.</li><li><span class="term">challenges</span>The collection of <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.net.http.headers.authenticationheadervalue">AuthenticationHeaderValue</a> instances representing the server's authentication challenges.</li><li><span class="term">cancellationToken</span>A <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a> for canceling the operation.</li></ul>

<p>
It is crucial to use the <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a> provided to the delegate for any requests using the client that triggered the 
authentication challenge, to prevent deadlocks caused by recurring 401 errors. This client is a temporary, cloned version of the original 
client, created specifically for handling the authentication process. As such, any changes made to this clone's configuration will not 
impact the original client. 
</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">asyncAuthenticator</code> is <code>null</code>.</p>
</dd>
  </dl>



  <h2 class="section" id="methods">Methods
</h2>


  <a id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_CanHandle_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.CanHandle*"></a>

  <h3 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_CanHandle_System_Net_HttpStatusCode_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.CanHandle(System.Net.HttpStatusCode)">
  CanHandle(HttpStatusCode)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L115"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Determines whether this handler can process the specified HTTP status code.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool CanHandle(HttpStatusCode statusCode)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>statusCode</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.net.httpstatuscode">HttpStatusCode</a></dt>
    <dd><p>The HTTP status code to evaluate.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p><code>true</code> if the handler can process the status code; otherwise, <code>false</code>.</p>
</dd>
  </dl>







  <h4 class="section" id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_CanHandle_System_Net_HttpStatusCode__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This implementation specifically handles the HTTP '401 Unauthorized' status code.</p>
</div>




  <a id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_DecideOnRetryAsync_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.DecideOnRetryAsync*"></a>

  <h3 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_DecideOnRetryAsync_Kampute_HttpClient_HttpResponseErrorContext_System_Threading_CancellationToken_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.DecideOnRetryAsync(Kampute.HttpClient.HttpResponseErrorContext,System.Threading.CancellationToken)">
  DecideOnRetryAsync(HttpResponseErrorContext, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L235"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Attempts to recover from an unauthorized request error by re-authenticating and retrying the request.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected virtual Task&lt;HttpErrorHandlerResult&gt; DecideOnRetryAsync(HttpResponseErrorContext ctx, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>ctx</code> <a class="xref" href="Kampute.HttpClient.HttpResponseErrorContext.html">HttpResponseErrorContext</a></dt>
    <dd><p>The context containing information about the HTTP response that indicates a failure.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>A token for canceling the operation.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="Kampute.HttpClient.HttpErrorHandlerResult.html">HttpErrorHandlerResult</a>&gt;</dt>
    <dd><p>A task that resolves to an <a class="xref" href="Kampute.HttpClient.HttpErrorHandlerResult.html">HttpErrorHandlerResult</a>.</p>
</dd>
  </dl>







  <h4 class="section" id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_DecideOnRetryAsync_Kampute_HttpClient_HttpResponseErrorContext_System_Threading_CancellationToken__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method attempts to re-authenticate the client in response to an '401 Unauthorized'. The process involves:</p>
<ul><li>Invoking the provided asynchronous delegate to obtain new authorization details.</li><li>If authentication is successful, the method clones the original request, updates it with the new authorization 
header, and returns <a class="xref" href="Kampute.HttpClient.HttpErrorHandlerResult.html#Kampute_HttpClient_HttpErrorHandlerResult_Retry_System_Net_Http_HttpRequestMessage_">Retry(HttpRequestMessage)</a> with the updated request, indicating that 
the request should be retried.</li><li>If authentication cannot be successfully completed or if no suitable challenge can be met, the method returns 
<a class="xref" href="Kampute.HttpClient.HttpErrorHandlerResult.html#Kampute_HttpClient_HttpErrorHandlerResult_NoRetry">NoRetry</a>, indicating that the request cannot be recovered by this handler.</li></ul>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Throws if <code class="paramref">ctx</code> is <code>null</code>.</p>
</dd>
  </dl>



  <a id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_Dispose_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.Dispose*"></a>

  <h3 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_Dispose" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.Dispose">
  Dispose()
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L101"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Releases the unmanaged resources used by the <a class="xref" href="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.html">HttpError401Handler</a> and optionally disposes of the managed resources.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
  </div>













  <a id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_Dispose_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.Dispose*"></a>

  <h3 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_Dispose_System_Boolean_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.Dispose(System.Boolean)">
  Dispose(bool)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L142"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Disposes the <a class="xref" href="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.html">HttpError401Handler</a> instance.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected virtual void Dispose(bool disposing)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>disposing</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>Indicates whether the method is called from a <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.idisposable.dispose">Dispose()</a> method.</p>
</dd>
  </dl>












  <a id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_TryAuthenticateAsync_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.TryAuthenticateAsync*"></a>

  <h3 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_TryAuthenticateAsync_Kampute_HttpClient_HttpRestClient_System_String_System_String_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.TryAuthenticateAsync(Kampute.HttpClient.HttpRestClient,System.String,System.String)">
  TryAuthenticateAsync(HttpRestClient, string, string?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L130"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Asynchronously attempts to authenticate the client by new authorization details.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;bool&gt; TryAuthenticateAsync(HttpRestClient client, string scheme, string? parameter = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>client</code> <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a></dt>
    <dd><p>The instance of <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a> that requires authentication.</p>
</dd>
    <dt><code>scheme</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The desired authorization scheme, such as &quot;Bearer&quot; or &quot;Basic&quot;.</p>
</dd>
    <dt><code>parameter</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>An optional parameter for the authorization scheme.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>&gt;</dt>
    <dd><p><code>true</code> if authorization details are successfully acquired and set; otherwise, <code>false</code>.</p>
</dd>
  </dl>







  <h4 class="section" id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_TryAuthenticateAsync_Kampute_HttpClient_HttpRestClient_System_String_System_String__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Upon successful authentication, this method directly updates the default request headers of the <code class="paramref">client</code>
with the provided authorization details, ensuring that all subsequent requests from the <code class="paramref">client</code> use these
credentials.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentexception">ArgumentException</a></dt>
    <dd><p>Thrown if <code class="paramref">scheme</code> is <code>null</code> or empty.</p>
</dd>
  </dl>



  <a id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_TrySolveAuthenticationChallengeAsync_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.TrySolveAuthenticationChallengeAsync*"></a>

  <h3 id="Kampute_HttpClient_ErrorHandlers_HttpError401Handler_TrySolveAuthenticationChallengeAsync_Kampute_HttpClient_HttpRestClient_System_Collections_Generic_IEnumerable_System_Net_Http_Headers_AuthenticationHeaderValue__System_Threading_CancellationToken_" data-uid="Kampute.HttpClient.ErrorHandlers.HttpError401Handler.TrySolveAuthenticationChallengeAsync(Kampute.HttpClient.HttpRestClient,System.Collections.Generic.IEnumerable{System.Net.Http.Headers.AuthenticationHeaderValue},System.Threading.CancellationToken)">
  TrySolveAuthenticationChallengeAsync(HttpRestClient, IEnumerable&lt;AuthenticationHeaderValue&gt;, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/ErrorHandlers/HttpError401Handler.cs/#L162"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Attempts to solve at least one of the authentication challenges received from the server.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected virtual Task&lt;bool&gt; TrySolveAuthenticationChallengeAsync(HttpRestClient client, IEnumerable&lt;AuthenticationHeaderValue&gt; challenges, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>client</code> <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a></dt>
    <dd><p>The <a class="xref" href="Kampute.HttpClient.HttpRestClient.html">HttpRestClient</a> instance attempting to authenticate.</p>
</dd>
    <dt><code>challenges</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.net.http.headers.authenticationheadervalue">AuthenticationHeaderValue</a>&gt;</dt>
    <dd><p>A collection of <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.net.http.headers.authenticationheadervalue">AuthenticationHeaderValue</a> items representing the <code>WWW-Authenticate</code> headers received from a server response.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>A token for canceling the operation.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>&gt;</dt>
    <dd><p>A task that resolves to <code>true</code> if the client successfully acquires and sets new authorization details; otherwise, <code>false</code>.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Throws if <code class="paramref">client</code> or <code class="paramref">challenges</code> is <code>null</code>.</p>
</dd>
  </dl>



  <h2 id="seealso">See Also</h2>
  <div class="seealso">
      <div><a class="xref" href="Kampute.HttpClient.HttpRestClient.html#Kampute_HttpClient_HttpRestClient_ErrorHandlers">ErrorHandlers</a></div>
  </div>

</article>



      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © 2024 Kampute
        </div>
      </div>
    </footer>
  </body>
</html>
