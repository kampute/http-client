<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class AsyncGuard&lt;T&gt; | Kampute.HttpClient .NET Library </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class AsyncGuard&lt;T&gt; | Kampute.HttpClient .NET Library ">
      
      <meta name="description" content="Provides a thread-safe mechanism for asynchronously updating a value of type T.">
      <link rel="icon" href="../ICON.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      <meta name="docfx:disablenewtab" content="true">
      
      <meta name="docfx:docurl" content="https://github.com/kampute/http-client/new/master/apiSpec/new?filename=Kampute_HttpClient_Utilities_AsyncGuard_1.md&amp;value=---%0Auid%3A%20Kampute.HttpClient.Utilities.AsyncGuard%601%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../ICON.png" alt="Kampute.HttpClient .NET Library">
            Kampute.HttpClient .NET Library
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1">



  <h1 id="Kampute_HttpClient_Utilities_AsyncGuard_1" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1" class="text-break">
Class AsyncGuard&lt;T&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/Utilities/AsyncGuard.cs/#L22"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Kampute.html">Kampute</a>.<a class="xref" href="Kampute.HttpClient.html">HttpClient</a>.<a class="xref" href="Kampute.HttpClient.Utilities.html">Utilities</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Kampute.HttpClient.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Provides a thread-safe mechanism for asynchronously updating a value of type <code class="typeparamref">T</code>.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class AsyncGuard&lt;T&gt; : IDisposable</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd><p>The type of the value to be updated. It is recommended that this type be immutable to ensure thread-safe operations.</p>
</dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">AsyncGuard&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.idisposable">IDisposable</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="Kampute_HttpClient_Utilities_AsyncGuard_1_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
This class ensures that updates to the value are performed in a thread-safe manner and allows for updates to be deferred if
a more recent update request has been made. It is particularly useful in scenarios where values are being updated from multiple
sources or threads and you want to ensure consistency and prevent race conditions.
</p>
<p>
The value is updated using an asynchronous updater function provided by the caller, which can incorporate custom logic for
updating the value based on its current state and external criteria.
</p>
</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="Kampute_HttpClient_Utilities_AsyncGuard_1__ctor_" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.#ctor*"></a>

  <h3 id="Kampute_HttpClient_Utilities_AsyncGuard_1__ctor__0_" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.#ctor(`0)">
  AsyncGuard(T?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/Utilities/AsyncGuard.cs/#L32"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="Kampute.HttpClient.Utilities.AsyncGuard-1.html">AsyncGuard&lt;T&gt;</a> class with an initial value.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public AsyncGuard(T? initialValue)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>initialValue</code> <span class="xref">T</span></dt>
    <dd><p>The initial value of the type <code class="typeparamref">T</code>.</p>
</dd>
  </dl>












  <h2 class="section" id="properties">Properties
</h2>


  <a id="Kampute_HttpClient_Utilities_AsyncGuard_1_LastUpdateUnixTime_" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.LastUpdateUnixTime*"></a>

  <h3 id="Kampute_HttpClient_Utilities_AsyncGuard_1_LastUpdateUnixTime" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.LastUpdateUnixTime">
  LastUpdateUnixTime
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/Utilities/AsyncGuard.cs/#L58"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the Unix time stamp of the last successful update operation.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public long LastUpdateUnixTime { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd><p>The Unix time stamp representing the point in time when the last successful update to the value was made, measured in milliseconds.
If no update has been applied, the value is zero.</p>
</dd>
  </dl>








  <a id="Kampute_HttpClient_Utilities_AsyncGuard_1_Value_" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.Value*"></a>

  <h3 id="Kampute_HttpClient_Utilities_AsyncGuard_1_Value" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.Value">
  Value
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/Utilities/AsyncGuard.cs/#L45"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the current value.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public T? Value { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><span class="xref">T</span></dt>
    <dd><p>The current value of type <code class="typeparamref">T</code>. This value is thread-safe to access and represents the most recent state
managed by the <a class="xref" href="Kampute.HttpClient.Utilities.AsyncGuard-1.html">AsyncGuard&lt;T&gt;</a>.</p>
</dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="Kampute_HttpClient_Utilities_AsyncGuard_1_Dispose_" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.Dispose*"></a>

  <h3 id="Kampute_HttpClient_Utilities_AsyncGuard_1_Dispose" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.Dispose">
  Dispose()
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/Utilities/AsyncGuard.cs/#L107"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Releases all resources used by the <a class="xref" href="Kampute.HttpClient.Utilities.AsyncGuard-1.html">AsyncGuard&lt;T&gt;</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
  </div>













  <a id="Kampute_HttpClient_Utilities_AsyncGuard_1_TryUpdateAsync_" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.TryUpdateAsync*"></a>

  <h3 id="Kampute_HttpClient_Utilities_AsyncGuard_1_TryUpdateAsync_System_Func_System_Threading_Tasks_Task__0___System_Threading_CancellationToken_" data-uid="Kampute.HttpClient.Utilities.AsyncGuard`1.TryUpdateAsync(System.Func{System.Threading.Tasks.Task{`0}},System.Threading.CancellationToken)">
  TryUpdateAsync(Func&lt;Task&lt;T?&gt;&gt;, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/kampute/http-client/blob/master/src/Kampute.HttpClient/Utilities/AsyncGuard.cs/#L82"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Attempts to update the value asynchronously using the provided updater function.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Task&lt;bool&gt; TryUpdateAsync(Func&lt;Task&lt;T?&gt;&gt; asyncUpdater, CancellationToken cancellationToken = default)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>asyncUpdater</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-1">Func</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;T&gt;&gt;</dt>
    <dd><p>The asynchronous function used to update the value.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>A token for canceling the operation.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>&gt;</dt>
    <dd><p>A task that represents the asynchronous operation. The task result contains a boolean value that indicates whether the value was updated.</p>
</dd>
  </dl>







  <h4 class="section" id="Kampute_HttpClient_Utilities_AsyncGuard_1_TryUpdateAsync_System_Func_System_Threading_Tasks_Task__0___System_Threading_CancellationToken__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This method allows for a thread-safe update of the value. The update will only be applied if no other update has been completed since
this update attempt was initiated, preventing unnecessary updates or overwrites by concurrent operations.
</p>
<p>
If the update proceeds and is successful, the method returns <code>true</code>; if another update has already been applied, it returns <code>false</code>.
This behavior ensures that the value reflects the most recent update attempt that was actually needed.
</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">asyncUpdater</code> is <code>null</code>.</p>
</dd>
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.taskcanceledexception">TaskCanceledException</a></dt>
    <dd><p>Thrown if the operation is canceled via the cancellation token.</p>
</dd>
  </dl>




</article>



      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © 2024 Kampute
        </div>
      </div>
    </footer>
  </body>
</html>
